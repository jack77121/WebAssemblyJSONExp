<!DOCTYPE html>
<html>
    <head><title>WebAssembly test</title><meta charset='utf-8'></head>
<body>
    <script src="json_handler.js"></script>

    <script>

        var mystring = '{"name": "1JaB9WqLm8zqTnX6bjWfRqRKacKXnpJvuo","totalSupply": 5000,"ownerAddress": "13cf2hix5vXj4RPzWe6gT9pqRzXsGLJYx3","hash": "dqzzrzwfgurkeplhjienubimst","mapping": {"13cf2hix5vXj4RPzWe6gT9pqRzXsGLJYx3": 100},"id": "dqzzrzwfgurkeplhjienubimst"}';
        
        var instance = new Module.MyJson(mystring);

        var initial_JSON = instance.GetMyJson();
        document.write("my initial JSON:");
        document.write("<br>");
        document.write(initial_JSON);
        document.write("<br>");

        var name = instance.GetName();
        document.write("name:");
        document.write("<br>");
        document.write(name);
        document.write("<br>");

        var total_supply = instance.GetSupply();
        document.write("supply:");
        document.write("<br>");
        document.write(total_supply);
        document.write("<br>");
        

        var valueOfMap = instance.GetMap("a");
        document.write("map:");
        document.write("<br>");
        document.write(valueOfMap);
        document.write("<br>");

        var valueOfMap2 = instance.GetMap2("c");
        document.write("map2:");
        document.write("<br>");
        document.write(valueOfMap2);
        document.write("<br>");

        instance.SetName("al;fajadsf");
      

        var name = instance.GetName();
        document.write("name after change:");
        document.write("<br>");
        document.write(name);
        document.write("<br>");

        instance.SetSupply(777);
        

        var total_supply = instance.GetSupply();
        document.write("supply after change:");
        document.write("<br>");
        document.write(total_supply);
        document.write("<br>");


        instance.Add_KeyInt("yaya", 8787987);

        instance.Add_KeyInt("kkkkk", 66666);
    

        var add_key_value = instance.GetMyJson();
        document.write("JSON after add key value:");
        document.write("<br>");
        document.write(add_key_value);
        document.write("<br>");


        instance.Add_KeyString("hahaha", "kerkerker");

        instance.Add_KeyString("zzz", "hhhh");

        instance.Add_KeyString("zzz", "hhhh");


        instance.Add_MemberIntoArray("map2", "123", "123");

        var final_JSON = instance.GetMyJson();
        document.write("JSON after add key string:");
        document.write("<br>");
        document.write(final_JSON);
        document.write("<br>");


    </script>

</body>

</html>