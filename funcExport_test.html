<!DOCTYPE html>
<html>
    <head><title>WebAssembly test</title><meta charset='utf-8'></head>
<body>
    <script src="json_handler.js"></script>

    <script>

        var mystring = '{"name": "ddd","total_supply": 6,"map": {"a": -2,"b": 87,"c": 4},"map2": [{"a":0},{"c":7}]}';
        
        var instance = new Module.MyJson(mystring);

        var initial_JSON = instance.GetMyJson();
        document.write("my initial JSON:");
        document.write("<br>");
        document.write(initial_JSON);
        document.write("<br>");

        var name = instance.GetName();
        document.write("name:");
        document.write("<br>");
        document.write(name);
        document.write("<br>");

        var total_supply = instance.GetSupply();
        document.write("supply:");
        document.write("<br>");
        document.write(total_supply);
        document.write("<br>");
        

        var valueOfMap = instance.GetMap("a");
        document.write("map:");
        document.write("<br>");
        document.write(valueOfMap);
        document.write("<br>");

        var valueOfMap2 = instance.GetMap2("c");
        document.write("map2:");
        document.write("<br>");
        document.write(valueOfMap2);
        document.write("<br>");

        instance.SetName("al;fajadsf");
      

        var name = instance.GetName();
        document.write("name after change:");
        document.write("<br>");
        document.write(name);
        document.write("<br>");

        instance.SetSupply(777);
        

        var total_supply = instance.GetSupply();
        document.write("supply after change:");
        document.write("<br>");
        document.write(total_supply);
        document.write("<br>");


        instance.Add_KeyInt("yaya", 8787987);

        instance.Add_KeyInt("kkkkk", 66666);
    

        var add_key_value = instance.GetMyJson();
        document.write("JSON after add key value:");
        document.write("<br>");
        document.write(add_key_value);
        document.write("<br>");


        instance.Add_KeyString("hahaha", "kerkerker");

        instance.Add_KeyString("zzz", "hhhh");

        var final_JSON = instance.GetMyJson();
        document.write("JSON after add key string:");
        document.write("<br>");
        document.write(final_JSON);
        document.write("<br>");


    </script>

</body>

</html>